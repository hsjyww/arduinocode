#include <Arduino.h>
#include <TM1637Display.h>

// TM1637 핀 설정
#define CLK 2
#define DIO 3
TM1637Display display(CLK, DIO);

// 버튼 핀
#define BTN A0

unsigned long lastTick = 0;
int deciSeconds = 0;   // 0.1초 단위 저장
bool started = false;

void setup() {
  pinMode(BTN, INPUT_PULLUP);
  display.setBrightness(0x0f);   // 최대 밝기
  display.showNumberDecEx(0, 0b01000000, true); // 00.00 초기 표시
}

void loop() {
  // 버튼 눌러서 시작
  if (!started) {
    if (digitalRead(BTN) == LOW) {
      started = true;
      lastTick = millis();
    }
    return;
  }

  // 0.1초마다 증가
  if (millis() - lastTick >= 100) {
    lastTick += 100;
    deciSeconds = (deciSeconds + 1) % 1000; // 000.0 ~ 999.9 (약 16분)
  }

  // 표시: 앞 3자리는 초, 마지막은 0.1초
  int totalSeconds = deciSeconds / 10;
  int tenth = deciSeconds % 10;

  int displayVal = totalSeconds * 10 + tenth; // 예: 12초 3 = 123
  display.showNumberDecEx(displayVal, 0b01000000, true); 
  // 가운데 콜론(:) 대신 소수점 dp 위치 ON
}
